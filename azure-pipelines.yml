name: 'VolleyManagement Pipeline'

trigger:
- master
- Release
- issue/*

stages:
  - stage: 'Build'
    jobs:
      - job: container_build
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - task: Docker@2
            displayName: Docker Login
            inputs:
              containerRegistry: 'VM on Personal DockerHub'
              command: 'login'
          - task: Docker@2
            displayName: Docker Build and Push
            inputs:
              containerRegistry: 'VM on Personal DockerHub'
              repository: 'sdiachen/volleymanagement'
              command: 'buildAndPush'
              Dockerfile: './src/VolleyManagement.API/Dockerfile'
              buildContext: './src'
